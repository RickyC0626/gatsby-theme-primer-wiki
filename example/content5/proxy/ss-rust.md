# Shadowsocks Rust Setup

Repo: <https://github.com/shadowsocks/shadowsocks-rust>

Setup rust first: [[rust-debian-setup]]

## Install

```bash
rustup default nightly
cargo install shadowsocks-rust
```

## Configure

```bash
mkdir ss
```

Server config sample:

```json
{
  "servers": [
    {
      "address": "::",
      "port": 9982,
      "method": "chacha20-ietf-poly1305",
      "password": "strong-password",
      "mode": "tcp_and_udp",
      "fast_open": false,
      "timeout": 7200
    }
  ]
}
```

## Add as a system service

```bash
sudo vim /etc/systemd/system/ss.service
```

```bash
[Unit]
Description=ssserver service
After=network.target

[Service]
ExecStart=/home/username/.cargo/bin/ssserver -c /home/username/ss/config.json
ExecStop=/usr/bin/killall ssserver
Restart=on-failure
StandardOutput=syslog               # Output to syslog
StandardError=syslog                # Output to syslog
SyslogIdentifier=ss
User=username
Group=admin

[Install]
WantedBy=multi-user.target
```

```bash
sudo systemctl daemon-reload
sudo systemctl enable --now ss
```

## Run

## Status

```bash
sudo systemctl status ss
```

## Stop

```bash
sudo systemctl stop ss
```

## Update

```bash
cargo install shadowsocks-rust
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[rust-debian-setup]: ../backend/rust-debian-setup.md "Rust Environment Setup for Debian"
[//end]: # "Autogenerated link references"
